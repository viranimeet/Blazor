@page "/addmany"
@using EmployeeManagement.Web.Data.Models
@rendermode InteractiveServer

<h3>Add Multiple Employees (Manual Binding)</h3>

<div class="mb-3">
    <label>Number of Employees to Add</label>
    <InputNumber @bind-Value="numberOfEmployees" class="form-control" />
</div>

<button class="btn btn-primary mb-3" @onclick="GenerateRows">Generate Rows</button>
@if (errors != null && errors.Count > 0)
{
    <div class="alert alert-danger">
        <ul>
            @foreach (var error in errors)
            {
                <li>@error</li>
            }
        </ul>
    </div>
}

@if (employees.Any())
{
    <form>
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>First Name</th>
                    <th>Last Name</th>
                    <th>Email</th>
                    <th>Department ID</th>
                    <th>Is Active</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var emp in employees)
                {
                    <tr>
                        <td><input class="form-control" @bind="emp.FirstName" /></td>
                        <td><input class="form-control" @bind="emp.LastName" /></td>
                        <td><input class="form-control" @bind="emp.Email" /></td>
                        <td>
                            <select class="form-select" @bind="emp.DepartmentId" @bind:event="onchange">
                                <option value="">Select Department</option>
                                @foreach (var dept in departments)
                                {
                                    <option value="@dept.DepartmentId">@dept.DepartmentName</option>
                                }
                            </select>
                        </td>
                        <td class="text-center">
                            <input type="checkbox" class="form-check-input" @bind="emp.IsActive" />
                        </td>
                    </tr>
                }
            </tbody>


        </table>

        <button type="button" class="btn btn-success" @onclick="SubmitMany">Save All</button>
    </form>
}
